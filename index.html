<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Starry Sky - Erik Gimbergsson</title>
        <style>
            body {
                margin: 0;
                overflow: hidden;
                background: linear-gradient(to bottom, #000428, #004e92);
            }
            canvas {
                display: block;
            }
        </style>
    </head>
    <body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
        <script>
            let scene,
                camera,
                renderer,
                stars = [],
                textMesh;

            function init() {
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(
                    75,
                    window.innerWidth / window.innerHeight,
                    0.1,
                    1000,
                );
                camera.position.z = 50;

                renderer = new THREE.WebGLRenderer({
                    antialias: true,
                    alpha: true,
                });
                renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(renderer.domElement);

                createStars();
                createText();

                window.addEventListener("resize", onWindowResize);
            }

            function createStars() {
                const starColors = [
                    0xffffff, 0xffd700, 0xff6b9d, 0x4da6ff, 0x9d4dff, 0xff4d4d,
                    0x4dffff,
                ];

                for (let i = 0; i < 1000; i++) {
                    const size = Math.random() * 0.8 + 0.2;
                    const geometry = new THREE.SphereGeometry(size, 8, 8);
                    const color =
                        starColors[
                            Math.floor(Math.random() * starColors.length)
                        ];
                    const material = new THREE.MeshBasicMaterial({
                        color: color,
                    });
                    const star = new THREE.Mesh(geometry, material);

                    star.position.x = (Math.random() - 0.5) * 200;
                    star.position.y = (Math.random() - 0.5) * 200;
                    star.position.z = (Math.random() - 0.5) * 200;

                    star.userData = {
                        originalScale: size,
                        twinkleSpeed: Math.random() * 0.02 + 0.01,
                        twinkleOffset: Math.random() * Math.PI * 2,
                    };

                    scene.add(star);
                    stars.push(star);
                }
            }

            function createText() {
                const canvas = document.createElement("canvas");
                const context = canvas.getContext("2d");
                canvas.width = 2048;
                canvas.height = 512;

                context.fillStyle = "rgba(0, 0, 0, 0)";
                context.fillRect(0, 0, canvas.width, canvas.height);

                context.fillStyle = "#ffffff";
                context.font = "bold 120px Arial";
                context.textAlign = "center";
                context.textBaseline = "middle";
                context.fillText(
                    "Erik Gimbergsson",
                    canvas.width / 2,
                    canvas.height / 2,
                );

                const texture = new THREE.CanvasTexture(canvas);
                const material = new THREE.MeshBasicMaterial({
                    map: texture,
                    transparent: true,
                    side: THREE.DoubleSide,
                });
                const geometry = new THREE.PlaneGeometry(80, 20);
                textMesh = new THREE.Mesh(geometry, material);
                textMesh.position.z = 0;
                scene.add(textMesh);
            }

            function animate() {
                requestAnimationFrame(animate);

                const time = Date.now() * 0.001;

                stars.forEach((star) => {
                    // Flying through space effect
                    star.position.z += 0.5;

                    // Reset star position when it passes the camera
                    if (star.position.z > 50) {
                        star.position.z = -100;
                        star.position.x = (Math.random() - 0.5) * 200;
                        star.position.y = (Math.random() - 0.5) * 200;
                    }

                    // Twinkling effect
                    const twinkle = Math.sin(
                        time * star.userData.twinkleSpeed +
                            star.userData.twinkleOffset,
                    );
                    const scale =
                        star.userData.originalScale * (0.7 + twinkle * 0.3);
                    star.scale.set(scale, scale, scale);

                    star.material.opacity = 0.5 + twinkle * 0.5;
                });

                if (textMesh) {
                    textMesh.rotation.y = Math.sin(time * 0.3) * 0.1;
                }

                renderer.render(scene, camera);
            }

            function onWindowResize() {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }

            init();
            animate();
        </script>
    </body>
</html>
